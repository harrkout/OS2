[3 points] Question 2: Reducing the size of an executable

Examine the following 3 questions.



1) What is the best way to compile & link when generating a small executable?
------------------------------------------------------------------------------

	Best option would be to run the command  

		gcc -static -s  --> for original elf file
		
		strace -o file.out ./file  --> for tiny elf file (after configuration)


------------------------------------------------------------------------------
2) Can you make your executable even smaller? Hint: Read related documents from Julia Evans and others from *lab1_a_min_code*. You can also find others on the web.
------------------------------------------------------------------------------

 	Original code (simple example):

		
		   11 #include <stdio.h>
		   10 #include <stdlib.h>
			9 
			8 int main(void){
			7 
			6     int sec, min, left;
			5 
			4     printf("Give seconds: ");
		    3     scanf("%d", &sec);
			2 
			1     min = sec/60;
			0     left = sec%60;                                                                      
			1 
			2     printf("min: %3d \nleft: %3d\n", min, left);
			3 
			4     system("pause");                                                                    
			5 }      


------------------------------------------------------------------------------
	wc -c hello
	   929368 hello		<--- File size
------------------------------------------------------------------------------

	After  strace ./hello
		

		    6 int main(void){
		    5     
		    4     write(1, "Give seconds: ", 14);
		    3     read(0, "\n", 1024);                           
		    2     write(1, "min:   \n", 10);           
		    1     write(1, "left: \n", 10);           
			0 }
------------------------------------------------------------------------------

	strace -o hello.out ./hello
------------------------------------------------------------------------------
	 wc -c hello.out
		2198 hello.out    <--Final size
------------------------------------------------------------------------------

3) Can you apply those technqiques (in 1 & 2) in our example 02_static_dynamic_link and compare the code sizes. How much smaller is your final executable?  
------------------------------------------------------------------------------
Folder /x01_LAB_SW_DEVEL_LAB_LINUX_TOOLS_MAKE_GDB_LINKING/02_static_dynamic_link/01_STATIC_LIB_LINK_AT_COMPILE_TIME/
		
				wc -c prog2c                     
					803392 prog2c
------------------------------------------------------------------------------				
		after strace ./prog2c
		
				
				int x[2] = {1, 2};
				int y[2] = {3, 4};
				int z[2];

				int main() 
				{
					write(1, "z = [4 6]\n", 10);

				}
				
------------------------------------------------------------------------------				
		 wc -c prog2c.out 
		 	683 prog2c.out

------------------------------------------------------------------------------
	
	
	
Folder	/x01_LAB_SW_DEVEL_LAB_LINUX_TOOLS_MAKE_GDB_LINKING/02_static_dynamic_link/02_SHARED_LIB_LINK_COMPILE_TIME_export_LD_LIBRARY_PATH/
		

		Library addvec not linked so: 
				
			gcc -static -s addvec.c -o prog3c main.c
------------------------------------------------------------------------------		
		wc -c prog3c  	
			728464 prog3c
			
			
------------------------------------------------------------------------------			
		Code after strace /prog3c
		
				int main() 
				{
					write(1, "z = [4 6]\n", 10);
				}


------------------------------------------------------------------------------
		strace -o prog3c.out ./prog3c 
			z = [4 6]

------------------------------------------------------------------------------		
		wc -c prog3c.out 
			779 prog3c.out


